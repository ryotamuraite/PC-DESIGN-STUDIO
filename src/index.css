@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* グローバルサイズ変数 - Desktop */
  --text-xs: 0.75rem;     /* 12px */
  --text-sm: 0.875rem;    /* 14px */
  --text-base: 1rem;      /* 16px */
  --text-lg: 1.125rem;    /* 18px */
  --text-xl: 1.25rem;     /* 20px */
  --text-2xl: 1.5rem;     /* 24px */
  
  /* グローバルスペーシング変数 - Desktop */
  --space-1: 0.25rem;     /* 4px */
  --space-2: 0.5rem;      /* 8px */
  --space-3: 0.75rem;     /* 12px */
  --space-4: 1rem;        /* 16px */
  --space-5: 1.25rem;     /* 20px */
  --space-6: 1.5rem;      /* 24px */
  --space-8: 2rem;        /* 32px */
  
  /* ボタンサイズ - Desktop */
  --btn-padding-x: 1rem;  /* 16px */
  --btn-padding-y: 0.5rem; /* 8px */
  --btn-text: 0.875rem;   /* 14px */
}

/* Tablet (768px-1279px) - 約85%サイズ */
@media (max-width: 1279px) and (min-width: 768px) {
  :root {
    /* テキストサイズ - Tablet */
    --text-xs: 0.625rem;    /* 10px */
    --text-sm: 0.75rem;     /* 12px */
    --text-base: 0.875rem;  /* 14px */
    --text-lg: 1rem;        /* 16px */
    --text-xl: 1.125rem;    /* 18px */
    --text-2xl: 1.25rem;    /* 20px */
    
    /* スペーシング - Tablet */
    --space-1: 0.125rem;    /* 2px */
    --space-2: 0.25rem;     /* 4px */
    --space-3: 0.5rem;      /* 8px */
    --space-4: 0.75rem;     /* 12px */
    --space-5: 1rem;        /* 16px */
    --space-6: 1.25rem;     /* 20px */
    --space-8: 1.5rem;      /* 24px */
    
    /* ボタンサイズ - Tablet */
    --btn-padding-x: 0.75rem; /* 12px */
    --btn-padding-y: 0.375rem; /* 6px */
    --btn-text: 0.75rem;    /* 12px */
  }
}

/* Smartphone (767px以下) - 約70-75%サイズ + レイアウト調整 */
@media (max-width: 767px) {
  :root {
    /* テキストサイズ - Smartphone */
    --text-xs: 0.625rem;    /* 10px */
    --text-sm: 0.6875rem;   /* 11px */
    --text-base: 0.75rem;   /* 12px */
    --text-lg: 0.875rem;    /* 14px */
    --text-xl: 1rem;        /* 16px */
    --text-2xl: 1.125rem;   /* 18px */
    
    /* スペーシング - Smartphone (最小化) */
    --space-1: 0.125rem;    /* 2px */
    --space-2: 0.1875rem;   /* 3px */
    --space-3: 0.375rem;    /* 6px */
    --space-4: 0.5rem;      /* 8px */
    --space-5: 0.75rem;     /* 12px */
    --space-6: 1rem;        /* 16px */
    --space-8: 1.25rem;     /* 20px */
    
    /* ボタンサイズ - Smartphone */
    --btn-padding-x: 0.5rem;  /* 8px */
    --btn-padding-y: 0.25rem; /* 4px */
    --btn-text: 0.625rem;     /* 10px */
  }
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}

/* ==========================================
   レスポンシブデザインシステム - Phase 1
   ========================================== */

@layer base {
  body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
}

@layer components {
  .btn-primary {
    @apply px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors;
  }
  
  .btn-secondary {
    @apply px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors;
  }

  /* ===========================================
     レスポンシブナビゲーション
     =========================================== */
  .desktop-nav {
    @apply flex space-x-8;
  }

  .mobile-nav {
    @apply hidden relative;
  }

  .mobile-menu-btn {
    @apply lg:hidden flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-400 hover:border-gray-500;
  }

  .mobile-dropdown {
    @apply absolute right-0 top-12 mt-2 w-48 bg-white rounded-md shadow-lg z-50 border;
  }

  .mobile-nav-link {
    @apply block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100;
  }

  /* ===========================================
     デザインシステム - グラデーション
     =========================================== */
  .summary-section {
    background: linear-gradient(145deg, #0891b2, #0e7490);
    border-radius: 12px;
    padding: 16px;
    margin: 8px 0;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }

  .custom-hr {
    border: none;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    margin: 12px 0;
  }

  .progress-bar-improved {
    @apply w-full bg-gray-200 rounded-full h-3 overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full rounded-full transition-all duration-300 ease-in-out;
  }

  .progress-bar-fill.success {
    background: linear-gradient(90deg, #22c55e, #16a34a);
  }

  .progress-bar-fill.warning {
    background: linear-gradient(90deg, #f59e0b, #d97706);
  }

  .progress-bar-fill.danger {
    background: linear-gradient(90deg, #ef4444, #dc2626);
  }

  /* ===========================================
     モバイル用サマリートグル
     =========================================== */
  .summary-toggle-btn {
    @apply md:hidden fixed bottom-4 right-4 z-50 bg-cyan-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-cyan-700 transition-all duration-300;
  }

  .mobile-summary-panel {
    @apply md:hidden fixed inset-0 z-40 bg-black bg-opacity-50;
  }

  .mobile-summary-content {
    @apply absolute right-0 top-0 h-full w-80 bg-white transform transition-transform duration-300 ease-in-out;
  }

  .mobile-summary-content.closed {
    @apply translate-x-full;
  }

  .mobile-summary-content.open {
    @apply translate-x-0;
  }
}

@layer utilities {
  /* ===========================================
     レスポンシブブレイクポイント制御
     =========================================== */
  
  /* Desktop: 1024px以上 - フルナビゲーション */
  @media (min-width: 1024px) {
    .desktop-nav {
      @apply flex;
    }
    .mobile-nav {
      @apply hidden;
    }
    .summary-toggle-btn {
      @apply hidden;
    }
  }

  /* Tablet: 768px-1024px - ドロップダウンナビ */
  @media (max-width: 1024px) and (min-width: 768px) {
    .desktop-nav {
      @apply hidden;
    }
    .mobile-nav {
      @apply flex;
    }
  }

  /* Mobile: 768px以下 - スライド式サマリー */
  @media (max-width: 768px) {
    .desktop-nav {
      @apply hidden;
    }
    .mobile-nav {
      @apply flex;
    }
    
    .normal-mode .right-panel {
      @apply hidden;
    }
    
    .normal-mode .main-left {
      @apply w-full;
    }
  }

  /* ===========================================
     アニメーション
     =========================================== */
  .slide-in {
    animation: slideIn 0.3s ease-out forwards;
  }

  .slide-out {
    animation: slideOut 0.3s ease-in forwards;
  }

  .fade-in {
    animation: fadeIn 0.2s ease-out forwards;
  }

  @keyframes slideIn {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slideOut {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(100%);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* ===========================================
     タッチフレンドリーUI
     =========================================== */
  .touch-target {
    @apply min-h-12 min-w-12 flex items-center justify-center;
  }

  .touch-friendly {
    @apply p-3 rounded-lg transition-all duration-200 active:scale-95;
  }

  /* ===========================================
     アクセシビリティ対応
     =========================================== */
  .focus-visible {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  }

  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  }
}